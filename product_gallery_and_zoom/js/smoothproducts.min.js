!function(a){a.fn.extend({smoothproducts:function(){function b(){a(".sp_selected").removeClass("sp_selected"),a(".sp_lightbox").fadeOut(function(){a(this).remove()})}function c(a){return a.match(/url\([\"\']{0,1}(.+)[\"\']{0,1}\)+/i)[1]}a(".sp_loading").hide(),a(".sp_wrap").each(function(){a(this).addClass("sp_touch");var b=a("a",this).length;if(b>1){var c,d,e=a("a.sp_default",this)[0]?!0:!1;a(this).append('<div class="square_box"><div class="sp_large"></div></div><div class="sp_thumbs sp_tb_active"></div>'),a("a",this).each(function(b){var f=a("img",this).attr("src"),g=a(this).attr("href"),h="";(0===b&&!e||a(this).hasClass("sp_default"))&&(h=' class="sp_current"',c=g,d=a("img",this)[0].src),a(this).parents(".sp_wrap").find(".sp_thumbs").append('<a href="'+g+'" style="background-image:url('+f+')"'+h+"></a>"),a(this).remove()}),a(".sp_large",this).append('<a href="'+c+'" class="sp_current_big"><img src="'+d+'" alt="" /></a>'),a(".sp_wrap").css("display","inline-block")}else a(this).append('<div class="square_box"><div class="sp_large"></div></div>'),a("a",this).appendTo(a(".sp_large",this)).addClass(".sp_current_big"),a(".sp_wrap").css("display","inline-block")}),a(document.body).on("click",".sp_thumbs",function(a){a.preventDefault()}),a(document.body).on("mouseover",function(b){a(".sp_wrap").removeClass("sp_touch").addClass("sp_non_touch"),b.preventDefault()}),a(document.body).on("touchstart",function(){a(".sp_wrap").removeClass("sp_non_touch").addClass("sp_touch")}),a(document.body).on("click",".sp_tb_active a",function(b){b.preventDefault(),a(this).parent().find(".sp_current").removeClass(),a(this).addClass("sp_current"),a(this).parents(".sp_wrap").find(".sp_thumbs").removeClass("sp_tb_active"),a(this).parents(".sp_wrap").find(".sp_zoom").remove();var d=a(this).parents(".sp_wrap").find(".sp_large").height(),e=a(this).parents(".sp_wrap").find(".sp_large").width();a(this).parents(".sp_wrap").find(".sp_large").css({overflow:"hidden",height:d+"px",width:e+"px"}),a(this).addClass("sp_current").parents(".sp_wrap").find(".sp_large a").remove();var f=a(this).parent().find(".sp_current").attr("href"),g=c(a(this).parent().find(".sp_current").css("backgroundImage"));a(this).parents(".sp_wrap").find(".sp_large").html('<a href="'+f+'" class="sp_current_big"><img src="'+g+'"/></a>'),a(this).parents(".sp_wrap").find(".sp_large").hide().fadeIn(250,function(){var b=a(this).parents(".sp_wrap").find(".sp_large img").height();a(this).parents(".sp_wrap").find(".sp_large").animate({height:b},"fast",function(){a(".sp_large").css({height:"auto",width:"auto"})}),a(this).parents(".sp_wrap").find(".sp_thumbs").addClass("sp_tb_active")})}),a(document.body).on("mouseenter",".sp_non_touch .sp_large",function(b){var c=a("a",this).attr("href");a(this).append('<div class="sp_zoom"><img src="'+c+'"/></div>'),a(this).find(".sp_zoom").fadeIn(250),b.preventDefault()}),a(document.body).on("mouseleave",".sp_non_touch .sp_large",function(b){a(this).find(".sp_zoom").fadeOut(250,function(){a(this).remove()}),b.preventDefault()}),a(document.body).on("click",".sp_non_touch .sp_zoom",function(b){var c=a(this).html(),d=a(this).parents(".sp_wrap").find(".sp_thumbs a").length,e=a(this).parents(".sp_wrap").find(".sp_thumbs .sp_current").index()+1;a(this).parents(".sp_wrap").addClass("sp_selected"),a("body").append("<div class='sp_lightbox' data-currenteq='"+e+"'>"+c+"</div>"),d>1&&(a(".sp_lightbox").append("<a href='#' id='sp_prev'></a><a href='#' id='sp_next'></a>"),1==e?a("#sp_prev").css("opacity",".1"):e==d&&a("#sp_next").css("opacity",".1")),a(".sp_lightbox").fadeIn(),b.preventDefault()}),a(document.body).on("click",".sp_large a",function(b){var c=a(this).attr("href"),d=a(this).parents(".sp_wrap").find(".sp_thumbs a").length,e=a(this).parents(".sp_wrap").find(".sp_thumbs .sp_current").index()+1;a(this).parents(".sp_wrap").addClass("sp_selected"),a("body").append('<div class="sp_lightbox" data-currenteq="'+e+'"><img src="'+c+'"/></div>'),d>1&&(a(".sp_lightbox").append("<a href='#' id='sp_prev'></a><a href='#' id='sp_next'></a>"),1==e?a("#sp_prev").css("opacity",".1"):e==d&&a("#sp_next").css("opacity",".1")),a(".sp_lightbox").fadeIn(),b.preventDefault()}),a(document.body).on("click","#sp_next",function(b){b.stopPropagation();var d=a(".sp_lightbox").data("currenteq"),e=a(".sp_selected .sp_thumbs a").length;if(d>=e);else{var f=d+1,g=a(".sp_selected .sp_thumbs").find("a:eq("+d+")").attr("href"),h=c(a(".sp_selected .sp_thumbs").find("a:eq("+d+")").css("backgroundImage"));d==e-1&&a("#sp_next").css("opacity",".1"),a("#sp_prev").css("opacity","1"),a(".sp_selected .sp_current").removeClass(),a(".sp_selected .sp_thumbs a:eq("+d+")").addClass("sp_current"),a(".sp_selected .sp_large").empty().append("<a href="+g+'><img src="'+h+'"/></a>'),a(".sp_lightbox img").fadeOut(250,function(){a(this).remove(),a(".sp_lightbox").data("currenteq",f).append('<img src="'+g+'"/>'),a(".sp_lightbox img").hide().fadeIn(250)})}b.preventDefault()}),a(document.body).on("click","#sp_prev",function(b){b.stopPropagation();var d=a(".sp_lightbox").data("currenteq"),d=d-1;if(0>=d);else{1==d&&a("#sp_prev").css("opacity",".1");var e=d-1,f=a(".sp_selected .sp_thumbs").find("a:eq("+e+")").attr("href"),g=c(a(".sp_selected .sp_thumbs").find("a:eq("+e+")").css("backgroundImage"));a("#sp_next").css("opacity","1"),a(".sp_selected .sp_current").removeClass(),a(".sp_selected .sp_thumbs a:eq("+e+")").addClass("sp_current"),a(".sp_selected .sp_large").empty().append("<a href="+f+'><img src="'+g+'"/></a>'),a(".sp_lightbox img").fadeOut(250,function(){a(this).remove(),a(".sp_lightbox").data("currenteq",d).append('<img src="'+f+'"/>'),a(".sp_lightbox img").hide().fadeIn(250)})}b.preventDefault()}),a(document.body).on("click",".sp_lightbox",function(){b()}),a(document).keydown(function(a){return 27==a.keyCode?(b(),!1):void 0}),a(".sp_large").mousemove(function(b){var c=a(this).width(),d=a(this).height(),e=a(this).find(".sp_zoom").width(),f=a(this).find(".sp_zoom").height(),g=a(this).parent().offset(),h=b.pageX-g.left,i=b.pageY-g.top,j=Math.floor(h*(c-e)/c),k=Math.floor(i*(d-f)/d);a(this).find(".sp_zoom").css({left:j,top:k})})}})}(jQuery);
